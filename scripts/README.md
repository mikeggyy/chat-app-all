# 腳本說明

這個目錄包含了專案中使用的各種管理腳本。

## 服務管理腳本

### cleanup-ports.js

清理特定端口佔用的進程。適合用於端口衝突時快速清理。

**使用方式**：
```bash
npm run cleanup-ports
```

**清理的端口**：
- 4000 - 主應用後端 API
- 4001 - 管理後台後端 API
- 5173 - 主應用前端
- 5174 - 管理後台前端
- 8180, 9099, 9299, 4400, 4500 - Firebase Emulator 相關端口

**適用場景**：
- 端口被其他進程佔用
- 服務異常終止後端口未釋放
- 需要重啟特定服務

---

### kill-all-node.js

關閉系統中**所有** Node.js 進程。適合用於測試時清理所有測試服務。

**使用方式**：
```bash
npm run kill-all-node
```

**功能**：
1. 列出所有運行中的 Node.js 進程（包含 PID）
2. 一鍵終止所有 Node.js 進程
3. 驗證清理結果

**⚠️ 注意事項**：
- 會關閉**所有** Node.js 進程，包括其他專案的服務
- 執行前請確認沒有其他重要的 Node.js 服務在運行
- 適合在測試開發環境下使用
- 生產環境請謹慎使用

**適用場景**：
- 測試時開啟了多個服務，不確定哪些還在運行
- 一次性清理所有測試服務
- 重置開發環境
- 系統資源佔用過高，需要清理所有 Node.js 進程

---

## 選擇使用哪個腳本？

| 場景 | 推薦腳本 | 說明 |
|------|----------|------|
| 端口衝突 | `cleanup-ports` | 只清理專案使用的特定端口 |
| 測試完畢 | `kill-all-node` | 清理所有測試時開啟的服務 |
| 正常關閉服務 | `Ctrl + C` | 優雅停止當前運行的服務 |
| 其他專案也在運行 | `cleanup-ports` | 避免影響其他專案 |
| 只有本專案在運行 | `kill-all-node` | 快速清理所有服務 |

## 支援的平台

兩個腳本都支援：
- ✅ Windows (win32)
- ✅ macOS
- ✅ Linux

腳本會自動檢測作業系統並使用對應的命令。
