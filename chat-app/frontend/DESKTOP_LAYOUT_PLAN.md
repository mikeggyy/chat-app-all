# 桌面版佈局實施計畫

## 📋 計畫概覽

**目標**：為現有手機版應用添加響應式桌面版佈局，使用同一套代碼根據螢幕大小自動切換佈局。

**策略**：響應式改造（方向 B）- 保持一套代碼，透過 CSS 媒體查詢和條件渲染實現雙佈局。

**設計原則**：
- 桌面版保持與手機版相同的深色/紫色主題
- 不添加額外功能，僅調整佈局
- 漸進式實施，優先完成核心頁面

---

## 🎨 桌面版設計規範

### 斷點定義

```scss
// 新增斷點
$breakpoint-mobile: 767px;      // ≤767px 手機版
$breakpoint-tablet: 768px;      // 768-1023px 平板/小桌機
$breakpoint-desktop: 1024px;    // ≥1024px 桌面版
$breakpoint-wide: 1440px;       // ≥1440px 寬螢幕
```

### 桌面版佈局結構

#### 主要佈局框架

```
┌─────────────────────────────────────────────────────────────────┐
│                     頂部導航 (64px)                              │
│  Logo    [配對] [探索] [創作] [訊息] [我]         🔔  👤        │
├──────────────────────────────────────────────────────────────────┤
│                                                                  │
│                      主要內容區域                                 │
│                    (根據頁面不同而變化)                           │
│                                                                  │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

#### 聊天頁面特殊佈局

```
┌─────────────────────────────────────────────────────────────────┐
│                     頂部導航 (64px)                              │
├────────────────┬────────────────────────────────────────────────┤
│                │                                                │
│    對話列表     │              聊天區域                          │
│   (320px)      │            (自適應寬度)                         │
│                │                                                │
│  ┌──────────┐  │   ┌────────────────────────────────────────┐   │
│  │ 角色 A   │  │   │  角色名稱                    ⋮ ♡      │   │
│  │ 最後訊息 │  │   ├────────────────────────────────────────┤   │
│  └──────────┘  │   │                                        │   │
│  ┌──────────┐  │   │          訊息列表                      │   │
│  │ 角色 B   │  │   │                                        │   │
│  │ 最後訊息 │  │   │                                        │   │
│  └──────────┘  │   ├────────────────────────────────────────┤   │
│                │   │  輸入區域                              │   │
│                │   └────────────────────────────────────────┘   │
└────────────────┴────────────────────────────────────────────────┘
```

### CSS 變數擴展

```scss
:root {
  // 現有變數保持不變...

  // 桌面版新增變數
  --desktop-header-height: 64px;
  --desktop-sidebar-width: 280px;
  --desktop-chat-sidebar-width: 320px;
  --desktop-max-content-width: 1200px;
  --desktop-content-padding: 24px;
}
```

---

## 📁 新增檔案清單

### 新增組件

| 檔案路徑 | 說明 |
|---------|------|
| `src/components/layout/DesktopHeader.vue` | 桌面版頂部導航 |
| `src/components/layout/DesktopLayout.vue` | 桌面版佈局容器 |
| `src/components/chat-list/ChatListSidebar.vue` | 聊天頁面的對話列表側邊欄（重用 ChatListView 邏輯） |

### 新增 Composables

| 檔案路徑 | 說明 |
|---------|------|
| `src/composables/useBreakpoint.ts` | 響應式斷點檢測 |
| `src/composables/useDesktopLayout.ts` | 桌面版佈局狀態管理 |

### 新增樣式

| 檔案路徑 | 說明 |
|---------|------|
| `src/styles/desktop.scss` | 桌面版專用樣式 |
| `src/styles/breakpoints.scss` | 斷點變數和 mixins |

---

## 🔧 需修改的現有檔案

### 核心檔案

| 檔案 | 修改內容 |
|------|----------|
| `src/App.vue` | 添加桌面版佈局條件渲染 |
| `src/style.scss` | 移除手機模擬框架，改為響應式 |
| `src/router/index.ts` | 添加桌面版相關的路由 meta |

### 頁面組件

| 檔案 | 修改內容 |
|------|----------|
| `src/views/MatchView.vue` | 桌面版網格佈局 |
| `src/views/ChatView.vue` | 整合側邊欄對話列表 |
| `src/views/ChatListView.vue` | 可嵌入模式支援 |
| `src/views/ProfileView.vue` | 桌面版雙欄佈局 |
| `src/views/SearchView.vue` | 桌面版搜尋結果網格 |
| `src/views/ShopView.vue` | 桌面版商品網格 |
| `src/views/MembershipView.vue` | 桌面版會員卡片佈局 |
| `src/views/NotificationsView.vue` | 桌面版通知列表 |
| `src/views/FavoritesView.vue` | 桌面版收藏網格 |
| `src/views/RankingView.vue` | 桌面版排行榜 |

### 子組件

| 檔案 | 修改內容 |
|------|----------|
| `src/components/BottomNavBar.vue` | 桌面版隱藏 |
| `src/components/chat/ChatHeader.vue` | 桌面版樣式調整 |
| `src/components/chat/ChatContent.vue` | 桌面版寬度適配 |
| `src/components/chat/MessageList.vue` | 桌面版寬度適配 |
| `src/components/match/MatchCard.vue` | 桌面版卡片尺寸 |

---

## 📐 各頁面桌面版設計

### 1. 配對頁面 (MatchView)

**手機版**：全螢幕卡片輪播
**桌面版**：居中顯示，最大寬度 600px，保持卡片輪播效果

```
┌─────────────────────────────────────────────────────────────────┐
│                        頂部導航                                  │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│              ┌────────────────────────────┐                     │
│              │                            │                     │
│              │      角色卡片               │                     │
│              │      (最大 600px)          │                     │
│              │                            │                     │
│              │      [收藏] [聊天]         │                     │
│              └────────────────────────────┘                     │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 2. 探索/搜尋頁面 (SearchView)

**手機版**：單欄列表
**桌面版**：網格佈局，每行 3-4 個角色卡片

```
┌─────────────────────────────────────────────────────────────────┐
│                        頂部導航                                  │
├─────────────────────────────────────────────────────────────────┤
│  🔍 搜尋框                                                       │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐            │
│  │ 角色 1  │  │ 角色 2  │  │ 角色 3  │  │ 角色 4  │            │
│  └─────────┘  └─────────┘  └─────────┘  └─────────┘            │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐            │
│  │ 角色 5  │  │ 角色 6  │  │ 角色 7  │  │ 角色 8  │            │
│  └─────────┘  └─────────┘  └─────────┘  └─────────┘            │
└─────────────────────────────────────────────────────────────────┘
```

### 3. 聊天列表頁面 (ChatListView)

**手機版**：全螢幕對話列表
**桌面版**：居中顯示，最大寬度 800px

```
┌─────────────────────────────────────────────────────────────────┐
│                        頂部導航                                  │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│        ┌──────────────────────────────────────────┐             │
│        │  訊息                                    │             │
│        │  [全部] [收藏]                           │             │
│        ├──────────────────────────────────────────┤             │
│        │  ┌────────────────────────────────────┐ │             │
│        │  │ 角色頭像  角色名稱      時間       │ │             │
│        │  │           最後訊息...              │ │             │
│        │  └────────────────────────────────────┘ │             │
│        │  ┌────────────────────────────────────┐ │             │
│        │  │ 角色頭像  角色名稱      時間       │ │             │
│        │  │           最後訊息...              │ │             │
│        │  └────────────────────────────────────┘ │             │
│        └──────────────────────────────────────────┘             │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 4. 聊天頁面 (ChatView)

**手機版**：全螢幕聊天
**桌面版**：左側對話列表 + 右側聊天區域

```
┌─────────────────────────────────────────────────────────────────┐
│                        頂部導航                                  │
├────────────────┬────────────────────────────────────────────────┤
│  訊息          │  角色名稱                          ⋮ ♡        │
│  [全部] [收藏] ├────────────────────────────────────────────────┤
├────────────────┤                                                │
│  ┌──────────┐  │                                                │
│  │ 角色 A   │◀─│              訊息列表                          │
│  │ 最後訊息 │  │                                                │
│  └──────────┘  │                                                │
│  ┌──────────┐  │                                                │
│  │ 角色 B   │  │                                                │
│  │ 最後訊息 │  ├────────────────────────────────────────────────┤
│  └──────────┘  │  💬 輸入訊息...           🎁 📷 🎬           │
└────────────────┴────────────────────────────────────────────────┘
```

### 5. 個人資料頁面 (ProfileView)

**手機版**：單欄垂直佈局
**桌面版**：居中卡片，最大寬度 600px

```
┌─────────────────────────────────────────────────────────────────┐
│                        頂部導航                                  │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│              ┌────────────────────────────┐                     │
│              │      VIP 狀態卡片          │                     │
│              ├────────────────────────────┤                     │
│              │        [頭像]              │                     │
│              │       用戶名稱             │                     │
│              │       ID: xxx              │                     │
│              │      💰 1,000              │                     │
│              ├────────────────────────────┤                     │
│              │  [通知] [會員] [商店]       │                     │
│              │  [收藏] [排行榜] [每日獎勵] │                     │
│              └────────────────────────────┘                     │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 6. 商店頁面 (ShopView)

**手機版**：單欄商品列表
**桌面版**：網格佈局，商品卡片

### 7. 會員頁面 (MembershipView)

**手機版**：單欄會員方案列表
**桌面版**：三欄並排顯示會員方案

### 8. 角色創建流程

**桌面版**：居中顯示，最大寬度 600px，保持步驟式流程

---

## 📅 實施階段

### 第一階段：基礎架構 (預計 2-3 天)

**目標**：建立響應式基礎架構

**任務清單**：
- [ ] 建立 `useBreakpoint.ts` composable
- [ ] 建立 `src/styles/breakpoints.scss`
- [ ] 修改 `src/style.scss`，移除手機模擬框架
- [ ] 建立 `DesktopHeader.vue` 組件
- [ ] 建立 `DesktopLayout.vue` 組件
- [ ] 修改 `App.vue`，添加桌面版條件渲染
- [ ] 修改 `BottomNavBar.vue`，桌面版隱藏

**驗收標準**：
- 手機版 (< 768px) 保持現有佈局
- 桌面版 (≥ 1024px) 顯示頂部導航

### 第二階段：核心頁面改造 (預計 3-4 天)

**目標**：改造主要頁面的桌面版佈局

**任務清單**：
- [ ] 改造 `MatchView.vue`（居中卡片）
- [ ] 改造 `ChatListView.vue`（居中列表 + 可嵌入模式）
- [ ] 改造 `ProfileView.vue`（居中卡片）
- [ ] 改造 `SearchView.vue`（網格佈局）

**驗收標準**：
- 各頁面在桌面版有合適的佈局
- 功能與手機版完全相同

### 第三階段：聊天系統改造 (預計 3-4 天)

**目標**：實現聊天頁面的雙欄佈局

**任務清單**：
- [ ] 建立 `ChatListSidebar.vue` 組件
- [ ] 修改 `ChatView.vue`，整合側邊欄
- [ ] 調整聊天相關組件的寬度適配
- [ ] 處理對話切換時的狀態管理

**驗收標準**：
- 桌面版聊天頁面顯示左側對話列表
- 點擊對話列表項目可切換聊天對象
- 聊天功能正常運作

### 第四階段：輔助頁面改造 (預計 2-3 天)

**目標**：改造其餘頁面

**任務清單**：
- [ ] 改造 `ShopView.vue`（網格佈局）
- [ ] 改造 `MembershipView.vue`（三欄方案）
- [ ] 改造 `NotificationsView.vue`（居中列表）
- [ ] 改造 `FavoritesView.vue`（網格佈局）
- [ ] 改造 `RankingView.vue`（居中列表）
- [ ] 改造角色創建流程頁面（居中）

**驗收標準**：
- 所有頁面在桌面版有合適的佈局

### 第五階段：細節優化 (預計 2-3 天)

**目標**：優化細節和用戶體驗

**任務清單**：
- [ ] Modal 組件桌面版尺寸調整
- [ ] 滑鼠 hover 效果優化
- [ ] 過渡動畫調整
- [ ] 測試所有頁面在不同寬度下的表現
- [ ] 修復響應式相關的 bug

**驗收標準**：
- 所有 Modal 在桌面版有合適的尺寸
- 交互體驗流暢

---

## 🔑 關鍵實現細節

### useBreakpoint.ts

```typescript
import { ref, onMounted, onUnmounted, computed } from 'vue';

export function useBreakpoint() {
  const windowWidth = ref(typeof window !== 'undefined' ? window.innerWidth : 0);

  const isMobile = computed(() => windowWidth.value < 768);
  const isTablet = computed(() => windowWidth.value >= 768 && windowWidth.value < 1024);
  const isDesktop = computed(() => windowWidth.value >= 1024);
  const isWide = computed(() => windowWidth.value >= 1440);

  let resizeTimer: number | undefined;

  const handleResize = () => {
    if (resizeTimer) clearTimeout(resizeTimer);
    resizeTimer = window.setTimeout(() => {
      windowWidth.value = window.innerWidth;
    }, 100);
  };

  onMounted(() => {
    window.addEventListener('resize', handleResize);
  });

  onUnmounted(() => {
    window.removeEventListener('resize', handleResize);
    if (resizeTimer) clearTimeout(resizeTimer);
  });

  return {
    windowWidth,
    isMobile,
    isTablet,
    isDesktop,
    isWide,
  };
}
```

### App.vue 改造示意

```vue
<template>
  <div class="app-shell" :class="{ 'is-desktop': isDesktop }">
    <GlobalLoadingOverlay />
    <ToastContainer />

    <!-- 桌面版佈局 -->
    <template v-if="isDesktop">
      <DesktopHeader />
      <main class="desktop-content">
        <router-view />
      </main>
    </template>

    <!-- 手機版佈局 -->
    <template v-else>
      <router-view />
      <BottomNavBar v-if="showBottomNav" />
    </template>

    <LoginRewardModal ... />
  </div>
</template>

<script setup>
import { useBreakpoint } from './composables/useBreakpoint';

const { isDesktop } = useBreakpoint();
</script>
```

### style.scss 修改要點

```scss
// 移除原有的手機模擬框架
@media (min-width: 768px) {
  body {
    // 移除 display: flex; align-items: center; justify-content: center;
    // 移除 background: #0f0f14;
  }

  #app {
    // 移除 width: min(100vw, 430px);
    // 移除 height: min(100vh, 932px);
    // 移除 border-radius: 24px;
    // 移除 box-shadow;
    width: 100%;
    height: 100%;
  }
}

// 桌面版全局樣式
@media (min-width: 1024px) {
  .app-shell.is-desktop {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    background: var(--bg-dark);
  }

  .desktop-content {
    flex: 1;
    overflow-y: auto;
  }
}
```

---

## ⚠️ 注意事項

1. **保持向後兼容**：所有修改必須確保手機版功能不受影響
2. **漸進式實施**：每個階段完成後進行測試，確保穩定後再進入下一階段
3. **組件複用**：盡可能複用現有組件，避免重複代碼
4. **性能考量**：桌面版顯示更多內容時，注意性能優化
5. **測試覆蓋**：每個階段需要測試多種螢幕尺寸

---

## 📝 後續擴展

完成基本桌面版後，可以考慮：

1. **平板版優化**：針對 768-1024px 區間優化佈局
2. **鍵盤快捷鍵**：添加常用操作的鍵盤快捷鍵
3. **拖放支援**：桌面版支援拖放操作
4. **多視窗**：支援在新視窗/標籤頁打開聊天

---

*計畫建立日期：2025-12-02*
*預計總工時：12-17 天*
